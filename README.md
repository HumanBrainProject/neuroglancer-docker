Web server for Neuroglancer and pre-computed images
===================================================

This Docker image will run an *nginx* web server, serving
[Neuroglancer](https://github.com/HumanBrainProject/neuroglancer-scripts) at
the root. It will also serve images in the Neuroglancer pre-computed chunk
format, if they are provided under `/precomputed`.


Usage
=====

First, build Neuroglancer:

```
cd <neuroglancer-repo>
npm run build-min
```

Then, from this repository, copy the compiled Neuroglancer files, and build the
Docker image:

```
cp -r <neuroglancer-repo>/build/min neuroglancer
docker build -t neuroglancer-nginx .
```

You can then run this image. You can optionally pass `-v` if you want to serve
pre-computed data (e.g. generated by
[neuroglancer-scripts](https://github.com/HumanBrainProject/neuroglancer-scripts)).

```
docker run --name neuroglancer-nginx -v <data-volume>:/precomputed:ro -p 8080:80 -d neuroglancer-nginx
```


Developing on Neuroglancer
==========================

You can override the bundled version of the Neuroglancer code with a `-v` option:

```
cd <neuroglancer-repo>
npm run build
docker run --name neuroglancer-nginx-dev -v <data-volume>:/precomputed:ro -v "$PWD"/dist/dev:/neuroglancer:ro -p 8081:80 neuroglancer-nginx
npm run build:watch
```
